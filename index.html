<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Immria (Novus)</title>
    <meta name="description" content="Hello, World! - A-Frame">
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-teleport-controls/dist/aframe-teleport-controls.min.js"></script>
    <script type="text/javascript" language="javascript">
      AFRAME.registerComponent('monument-collection', {
        init: function () {
          // Code here.
          console.log('Welcome, class!');

          // Set up request to retrieve names from API endpoint
          var serverApiUrl = "https://pjrbfk87db.execute-api.us-east-1.amazonaws.com/dev/";
          var apiGetNames = "items";
          var namesUrl = serverApiUrl + apiGetNames;
          var dict = {};

          // // Send Request and Parse JSON Response
          // var request = new XMLHttpRequest();
          // request.responseType = 'json';
          // request.open('GET', namesUrl, true);

          // request.onload  = function() {
          //   var jsonResponse = request.response;
          //   // Error Checking Request
          //   if (request.status >= 200 && request.status < 400) {
          //     jsonResponse.forEach(name => {
          //       var tokenId = name["tokenId"];
          //       var addressName = name["addressName"]
          //       dict[tokenId] = addressName;
          //     })

              var sceneEl = document.querySelector('a-scene'); 
              for (var i = 0; i < 100; i++) {
                  // var boxEl = document.createElement('a-box');
                  // boxEl.setAttribute('material', {color: '#173852'});
                  // boxEl.setAttribute('position', {x: i, y: i, z: i});
                  // //boxEl.setAttribute('scale', {x: Math.random() / 2, y: Math.random() / 2, z: Math.random() / 2});
                  // sceneEl.appendChild(boxEl);

                  var textEl = document.createElement('a-entity');
                  var textPosX = (Math.floor(i/10)*2)-7.5;
                  var textPosY = 5 - (i%10)*0.3;
                  var textPosZ = -10 + 0.125;
                  var textValue = 'Alice Kisaragi';
                  // var textValue = dict[i];
                  console.log(dict[i]);
                  textEl.setAttribute('geometry', {width: 'auto', height: 'auto'});
                  textEl.setAttribute('position', {x: textPosX, y: textPosY, z: textPosZ}); 
                  textEl.setAttribute('text', {width:'5', value: textValue, whiteSpace: 'nowrap'});
                  sceneEl.appendChild(textEl);
                }

          //   } else {
          //     console.log('error')
          //   }
          // };
          // request.send(null);          
         }
      });
    
      AFRAME.registerComponent('code-to-attach-to-box', {
        init: function () {
          // Code here.
          console.log(this.el);
        }
      });
    </script>
  </head>
  <body>
    <a-scene monument-collection>
      <!-- Assets  -->
      <a-assets>
        <!-- <img id="boxTexture" src="assets/stones.jpg"> -->
        <img id="skyTexture"
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/sechelt.jpg">
      </a-assets>    

      <!-- Components -->
        <!-- Main Monument -->
        <a-box 
          color="#173852"
          position="-0.1 3.65 -10" 
          rotation="0 0 0"
          scale="20 3.2 0.25" 
        >
        </a-box>
          <!-- Main Feet -->
          <a-box 
            color="#173852"
            position="5 1.75 -10" 
            scale="1 1 .25" 
          >
          </a-box>
          <a-box 
            color="#173852"
            position="-5 1.75 -10" 
            scale="1 1 .25" 
          >
          </a-box>
          <!-- Main Stairs -->
          <a-box 
            color="#354654"
            position="0 0 -10" 
            scale="22.5 3 1.5" 
          >
          </a-box>
          <a-box 
            color="#424F59"
            position="0 -.5 -10" 
            scale="23 3 2" 
          >
          </a-box>
          <a-box 
            color="#4A5259"
            position="0 -1 -10" 
            scale="23.5 3 2.5" 
          >
          </a-box>

        <!-- Walls -->
        <a-box 
          color="#343737"
          position="-0.1 5 -25," 
          rotation="0 0 0"
          scale="50 10 0.25" 
        >
        </a-box>
        <a-box 
          color="#343737"
          position="25 5 0," 
          rotation="0 90 0"
          scale="50 10 0.25" 
        >
        </a-box>
        <a-box 
          color="#343737"
          position="-25 5 0," 
          rotation="0 90 0"
          scale="50 10 0.25" 
        >
        </a-box>

        <!-- BGM  -->
        <a-entity 
          id="bgm" 
          sound="src: url(assets/human-village.mp3); autoplay: true; volume: 0.1; loop: true; positional: false">
        </a-entity>

          <!-- hand controls -->
          <a-entity id="left-hand"
                    brush
                    paint-controls="hand: left"
                    blink-controls="cameraRig: #cameraRig; startEvents: aim; endEvents: teleport; hitCylinderColor: #ff3468; curveHitColor: #ff3468; curveMissColor: #333333; curveLineWidth: 0.01; hitEntity: #hitEntityLeft"
                    ui>
                      <a-entity class="vive-tooltips" visible="false">
                        <a-entity tooltip="text: Brush size\n(slide up/down); width: 0.1; height: 0.04; targetPosition: 0 0.016 0.0073; src: assets/images/tooltip.png"
                                  position="0.1 0.025 0.048"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Main menu; width: 0.07; height: 0.03; targetPosition: 0 -0.07 -0.062; lineHorizontalAlign: center; lineVerticalAlign: bottom; src: assets/images/tooltip.png"
                                  position="0 0.015 -0.05"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Press to paint\n(pressure sensitive); width: 0.11; height: 0.04; targetPosition: 0 -0.06 0.067; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                                  position="-0.11 -0.055 0.04"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Undo; width: 0.06; height: 0.03; targetPosition: -0.003 0.046 0.106; src: assets/images/tooltip.png"
                                  position="0.1 -0.005 0.12"
                                  rotation="-90 0 0">
                        </a-entity>
                      </a-entity>
                      <a-entity class="oculus-tooltips" visible="false">
                        <a-entity tooltip="text: Main Menu; width: 0.07; height: 0.03; targetPosition: 0.011 0.005 0.045; rotation: -90 0 0; src: assets/images/tooltip.png"
                                position="0.12 0.016 0.06">
                        </a-entity>
                        <a-entity tooltip="text: Teleport; width: 0.06; height: 0.03; targetPosition: 0.015 0 0.035; rotation: -90 0 0; src: assets/images/tooltip.png"
                            position="0.08 0.035 -0.02">
                        </a-entity>
                        <a-entity tooltip="text: Brush size\n(slide up/down); width: 0.09; height: 0.04; targetPosition: 0 0.01 0.03; lineHorizontalAlign: center; lineVerticalAlign: top; rotation: -90 0 0; src: assets/images/tooltip.png"
                            position="-0.07 0.01 0.093">
                        </a-entity>
                        <a-entity tooltip="text: Press to paint!\n(pressure sensitive); width: 0.11; height: 0.04; targetPosition: 0.022 -0.023 0.02; lineHorizontalAlign: right; rotation: -90 0 0; src: assets/images/tooltip.png"
                            position="-0.09 0.020 -0.067">
                        </a-entity>
                        <a-entity tooltip="text: Undo; width: 0.05; height: 0.03; targetPosition: 0.01 -0.03 0.047; rotation: -90 0 0; src: assets/images/tooltip.png"
                            position="0.07 -0.01 0.088">
                        </a-entity>
                      </a-entity>
                      <a-entity class="windows-motion-samsung-tooltips" visible="false">
                        <a-entity tooltip="text: Trigger to paint!; width: 0.1; height: 0.04; targetPosition: 0 -.3 -.1; lineHorizontalAlign: center; lineVerticalAlign: bottom; src: assets/images/tooltip.png"
                                  position="0 -.1 -.2"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Main menu; width: 0.07; height: 0.03; targetPosition: 0.005 -0.002 -.06; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                                  position="-0.1 0.02 -.05"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Brush size\n(up/down); width: 0.11; height: 0.04; targetPosition: 0 -.09 -.1; lineHorizontalAlign: left; src: assets/images/tooltip.png"
                                  position="0.2 0 -.11"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Press to undo; width: 0.11; height: 0.03; targetPosition: 0 0 0; lineHorizontalAlign: left; src: assets/images/tooltip.png"
                                  position="0.11 0 0"
                                  rotation="-90 0 0">
                        </a-entity>
                      </a-entity>
                      <a-entity class="windows-motion-tooltips" visible="false">
                        <a-entity tooltip="text: Trigger to paint!; width: 0.1; height: 0.04; targetPosition: 0 -.3 -.1; lineHorizontalAlign: center; lineVerticalAlign: bottom; src: assets/images/tooltip.png"
                                  position="0 -.1 -.2"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Main menu; width: 0.07; height: 0.03; targetPosition: 0.01 0.0025 -.06; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                                  position="-0.1 0.02 -.05"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Brush size\n(up/down); width: 0.11; height: 0.04; targetPosition: 0 -.09 -.1; lineHorizontalAlign: left; src: assets/images/tooltip.png"
                                  position="0.14 0 -.1"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Press to undo; width: 0.11; height: 0.03; targetPosition: 0 0 0; lineHorizontalAlign: left; src: assets/images/tooltip.png"
                                  position="0.11 0 0"
                                  rotation="-90 0 0">
                        </a-entity>
                    </a-entity>
          </a-entity>
          <a-entity id="right-hand"
                    brush
                    paint-controls="hand: right"
                    blink-controls="cameraRig: #cameraRig; startEvents: aim; endEvents: teleport; hitCylinderColor: #ff3468; curveHitColor: #ff3468; curveMissColor: #333333; curveLineWidth: 0.01; hitEntity: #hitEntityRight"
                    ui>
                      <a-entity class="vive-tooltips" visible="false">
                        <a-entity tooltip="text: Brush size\n(slide up/down); width: 0.1; height: 0.04; targetPosition: 0 0.016 0.0073; src: assets/images/tooltip.png"
                                  position="0.1 0.025 0.048"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Main menu; width: 0.07; height: 0.03; targetPosition: 0 -0.07 -0.062; lineHorizontalAlign: center; lineVerticalAlign: bottom; src: assets/images/tooltip.png"
                                  position="0 0.015 -0.05"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Press to paint\n(pressure sensitive); width: 0.11; height: 0.04; targetPosition: 0 -0.06 0.067; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                                  position="-0.11 -0.055 0.04"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Undo; width: 0.06; height: 0.03; targetPosition: -0.003 0.046 0.106; src: assets/images/tooltip.png"
                                  position="0.1 -0.005 0.12"
                                  rotation="-90 0 0">
                        </a-entity>
                      </a-entity>
                      <a-entity class="oculus-tooltips" visible="false">
                        <a-entity tooltip="text: Main Menu; width: 0.07; height: 0.03; targetPosition: -0.011 0.005 0.045; rotation: -90 0 0; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                            position="-0.12 0.016 0.06">
                        </a-entity>
                        <a-entity tooltip="text: Teleport; width: 0.06; height: 0.03; targetPosition: -0.015 0 0.035; rotation: -90 0 0; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                            position="-0.08 0.035 -0.02">
                        </a-entity>
                        <a-entity tooltip="text: Brush size\n(slide up/down); width: 0.09; height: 0.04; targetPosition: 0 0.01 0.03; lineHorizontalAlign: center; lineVerticalAlign: top; rotation: -90 0 0; src: assets/images/tooltip.png"
                            position="0.07 0.01 0.093">
                        </a-entity>
                        <a-entity tooltip="text: Press to paint!\n(pressure sensitive); width: 0.11; height: 0.04; targetPosition: -0.022 -0.023 0.02; lineHorizontalAlign: left; rotation: -90 0 0; src: assets/images/tooltip.png"
                            position="0.09 0.020 -0.067">
                        </a-entity>
                        <a-entity tooltip="text: Undo; width: 0.05; height: 0.03; targetPosition: -0.01 -0.03 0.047; rotation: -90 0 0; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                            position="-0.07 -0.01 0.088">
                        </a-entity>
                      </a-entity>
                      <a-entity class="windows-motion-samsung-tooltips" visible="false">
                        <a-entity tooltip="text: Trigger to paint!; width: 0.1; height: 0.04; targetPosition: 0 -.3 -.1; lineHorizontalAlign: center; lineVerticalAlign: bottom; src: assets/images/tooltip.png"
                                  position="0 -.1 -.2"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Main menu; width: 0.07; height: 0.03; targetPosition: -.01 -0.004 -.06; lineHorizontalAlign: left; src: assets/images/tooltip.png"
                                  position="0.1 0.02 -.05"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Brush size\n(up/down); width: 0.11; height: 0.04; targetPosition: 0 -.09 -.1; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                                  position="-0.19 -0.003 -.11"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Press to undo; width: 0.11; height: 0.03; targetPosition: 0 0 0; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                                  position="-0.11 0 0"
                                  rotation="-90 0 0">
                        </a-entity>
                      </a-entity>
                      <a-entity class="windows-motion-tooltips" visible="false">
                        <a-entity tooltip="text: Trigger to paint!; width: 0.1; height: 0.04; targetPosition: 0 -.3 -.1; lineHorizontalAlign: center; lineVerticalAlign: bottom; src: assets/images/tooltip.png"
                                  position="0 -.1 -.2"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Main menu; width: 0.07; height: 0.03; targetPosition: -.015 0.0025 -.06; lineHorizontalAlign: left; src: assets/images/tooltip.png"
                                  position="0.1 0.02 -.05"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Brush size\n(up/down); width: 0.11; height: 0.04; targetPosition: 0 -.09 -.1; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                                  position="-0.14 0 -.1"
                                  rotation="-90 0 0">
                        </a-entity>
                        <a-entity tooltip="text: Press to undo; width: 0.11; height: 0.03; targetPosition: 0 0 0; lineHorizontalAlign: right; src: assets/images/tooltip.png"
                                  position="-0.11 0 0"
                                  rotation="-90 0 0">
                        </a-entity>
                      </a-entity>
          </a-entity>
        </a-entity>


      <a-plane color="#505559" rotation="-90 0 0" width="50" height="50"></a-plane>
      <a-sky src="#skyTexture"></a-sky>
    </a-scene>
  </body>
</html>